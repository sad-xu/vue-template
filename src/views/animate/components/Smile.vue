<template>
  <svg xmlns="http://www.w3.org/2000/svg" class="subtitle" viewBox="0 0 150 150">
    <g
      fill="none" stroke="#000"
      stroke-linecap="round" stroke-linejoin="round">
      <path stroke-width="3" d="M75.13 29.44c-4.36-.88-8.64.79-12.37 2.81-4.69 1.83-10.15 2.62-14.02 5.85-3.26 4.19-8.96 5.64-11.73 10.17-4.43 4.31-6.66 10-8.73 15.73-2.65 5.74-2.42 12.1-2.23 18.24 1.09 5.26 3.37 10.22 5.47 15.15 2.53 5.22 7.33 8.66 10.93 13.07 3.22 3.46 7.8 4.85 12.11 6.35 3.9 2.88 8.63 4.57 13.13 5.96 4.04 1.84 8.94 1.32 13.02-.12 5.24-2.56 11.28-.43 16.5-2.87 4.44-3.45 10.53-5.37 13.54-10.32 3.88-3.75 5.84-8.8 9.01-13.1 3.61-4.46 4.02-10.49 3.98-16.01.08-5.35 1.27-11.05-.48-16.17-2.12-4.76-5.24-9.03-7.24-13.86-2.96-4.49-7.7-7.16-12.2-9.82-2.74-3.83-6.63-7.33-11.64-7.45-5.6-.6-10.42-4.03-16.06-4.27l-.63.2z" />
      <path id="eye-1" stroke-width="1.5" d="M56.57 55.78c-2.2-.54-4.93-1.25-6.35.84-.2.23-1.96 3.54-1.6 5.52.16 3.03 3.2 4.57 5.83 4.77 2.7.08 5.94-1.33 6.36-4.06.15-1.98 1.52-4.04.18-5.66-1.77-1.53-4.68-1.31-7.21-1.24-2.39.2-3.5 2.25-3.58 4.42-.06 1.5-1.13 4.88.36 5.4.8 2.32 3.93 1.26 5.94 1.5 1.82-.1 4.06-.98 4.66-2.65.6-1.03.87-2.61.89-4.88.86-3.19-2.28-3.15-4.56-3.58-2.89-.99-6.24.64-7.1 3.5-.92 1.9-1.3 4.51-.55 6.54 1.83 2.07 4.95.96 7.44 1.25 2.54-.1 5.2-2.55 4.77-5.3-.42-2.58-1.43-2.87-2.83-4.43-.07-1.77-1.97-.56-2.65-1.94z" />
      <path id="eye-2" stroke-width="1.5" d="M92.1 56.84c-2.85.64-2.15 3.88-2.3 6.19 1.13 2.83 3.42 5.54 6.72 5.83 2.21.53 2.55-2.27 4.07-3.18 1.6-1.94 2.55-5.45-.36-6.9-2.1-2.13-6.6-2.24-9.85-2.14-2.65 1.97-2.38 6.72.66 8.33 1.72 1.94 3.88 3.43 6.54 3 3.12.23 4.25-2.85 3.89-5.5a28.49 28.49 0 00-3.36-6.52c-1.15-.83-3.25-.12-4.77-.35-3.15.18-4.22 2.7-4.77 5.3-.7 3.52 2.1 6.3 5.3 6.72 2.72 1.03 5.69-1.4 6-4.06.92-2.07.18-5.16-2.11-5.66-2.06.11-3.92-1.4-5.66-1.06z" />
      <path stroke-width="2" d="M44.9 87.42c.9 4.3 2.48 8.7 4.95 12.38a21.4 21.4 0 008.57 6.63c3.58 1.57 7.13 3.12 11.12 3.23.92.58 4.06.54 5.94.57 3.9 0 7.76.28 11.67.17 4.56-1.28 7.45-3.39 11.15-5.38 2.97-1.57 6.03-5.1 7.34-6.92a60.16 60.16 0 003.78-8.38c.04-1.83 1.03-3.07 1.07-4.77" />
      <path stroke-width="2" d="M51.44 89.9c-3.18.87-6.2 3.85-8.3 5.12h-.18l-.53.53" />
      <path stroke-width="2" d="M56.57 95.02c-1.74 3.56-3.74 7.11-5.3 10.79.05.62-.63.71-.71 1.23" />
      <path stroke-width="2" d="M64.17 99.27c-2.33 3.16-4 7.07-5.66 10.25v.53l-.17.53" />
      <path stroke-width="2" d="M74.78 102.1c-1.08 3.85-1.07 8.55-2.17 12-.25.69-.05 1.34-.49 1.96" />
      <path stroke-width="2" d="M85.56 101.92c-.08 4.15 4.46 7.34 6.36 9.9.17.22.62-.3.53.17" />
      <path stroke-width="2" d="M94.93 98.91c4.21.92 6.46 5.94 9.63 7.21l.45.22" />
      <path stroke-width="2" d="M101.82 91.49c2.82 1.63 5.08 3.2 7.9 3.9.35.1.2.74.77.52" />
      <path id="tear-1" stroke-width="3" d="M55.33 67.45c0 7.08.3 14.14.18 21.24v7.22l.55-.41.5-.48" />
      <path id="tear-2" stroke-width="3" d="M96.87 67.98c-.73 3.25.68 6.27.36 9.54.74 4.2 1.29 6 1.23 9.9.7 2.22.16 4.64.53 6.86.25 1.76.33 3.55-.53 4.8" />
    </g>
  </svg>
</template>

<script>
import anime from '../animate'

export default {
  name: 'Smile',
  mounted() {
    this.$nextTick(() => {
      this.init()
    })
  },
  methods: {
    init() {
      function durationTime(el, i) {
        return Math.max(el.getTotalLength() * 10, 300)
      }
      function delayTime(el, i) {
        let t = 0
        let lastT = 0
        return function(el, i) {
          if (el.id === 'tear-2' || el.id === 'eye-2') return t
          t += lastT
          lastT = Math.max(el.getTotalLength() * 10, 300)
          return t
        }
      }
      anime({
        targets: this.$el.querySelectorAll('path'),
        easing: 'easeInOutQuad',
        loop: true,
        endDelay: 1000,
        strokeDashoffset: [anime.setDashoffset, 0],
        duration: durationTime,
        delay: delayTime()
      })
    }
  }
}
</script>
